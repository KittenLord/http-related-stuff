#include <stdlib.h>
#include <stdio.h>

#include "deflate.c"
#include "gzip.c"

int main() {
    u8 testData[] = {
        0xca, 0x48, 0xcd, 0xc9, 0xc9, 0x57, 0xc8, 0x40, 0x27, 0x01,

        0x1c, 0xc6, 0x49, 0x01, 0x00, 0x00,
        0x10, 0x40, 0xc0, 0xac, 0xa3, 0x7f, 0x88, 0x3d,
        0x3c, 0x20, 0x2a, 0x97, 0x9d, 0x37, 0x5e, 0x1d,
        0x0c,

        0x4b, 0x4c, 0x4a, 0x4c, 0x4e, 0x4c,
        0x49, 0x4c, 0x4d, 0x4c, 0x4b, 0x4c, 0x07, 0x00
    };

    Mem mem = Deflate_decompress(mkMem(testData, (23 + 10 + 14)), ALLOC);

    Mem raw = mkString("aaaaabbbbbaaaaa");
    Mem compressed = Deflate_compress(raw, false, 0, ALLOC);

    write(STDOUT_FILENO, mem.s, mem.len);
    printf("%p\n", mem.s);

    return 0;
}
